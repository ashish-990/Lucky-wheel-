<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <title>FindoLucky - Home</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --accent:#ffde59;
      --bg:#1b0f3f;
      --radius:14px;
      --transition:.3s ease;
      --card-bg: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      padding:0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background: linear-gradient(135deg,#2a0f5b,#0f294f);
      color:#fff;
      min-height:100vh;
    }
    .container{width:100%; max-width:1120px; padding:12px; margin:0 auto;}
    .header{
      width:100%;
      padding:14px 16px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      background:rgba(0,0,0,0.35);
      border-radius:10px;
      gap:8px;
      position:sticky;
      top:0;
      z-index:10;
    }
    .title{font-size:1.6rem; font-weight:700; display:flex; align-items:center; gap:6px;}
    .nav{display:flex; gap:12px; flex-wrap:wrap; align-items:center;}
    .btn{padding:10px 18px; border:none; border-radius:8px; cursor:pointer; font-weight:600; position:relative; transition:var(--transition);}
    .btn-primary{background: linear-gradient(135deg,#ffb347,#ffde59); color:#1f0f3f;}
    .btn-accent{background:#7f3aff; color:#fff;}
    .pulse{animation:pulse 2s infinite;}
    @keyframes pulse{
      0%{box-shadow:0 0 12px rgba(255,222,89,0.4);}
      50%{box-shadow:0 0 30px rgba(255,222,89,0.8);}
      100%{box-shadow:0 0 12px rgba(255,222,89,0.4);}
    }
    .flex-gap{display:flex; gap:16px; flex-wrap:wrap; margin-top:12px;}
    .card{
      background: var(--card-bg);
      border-radius:12px;
      padding:18px;
      position:relative;
      overflow:hidden;
      flex:1;
      min-width:280px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .section-title{display:flex; align-items:center; gap:8px; font-size:1.2rem; font-weight:700; margin-bottom:6px;}
    .wallet{font-size:1rem; font-weight:600; background:rgba(255,255,255,0.08); padding:6px 14px; border-radius:8px; display:inline-block;}
    .progress{width:100%; background: rgba(255,255,255,0.08); border-radius:8px; overflow:hidden; height:14px;}
    .progress-inner{height:100%; background: var(--accent); width:0%; transition:width .3s ease;}
    .small{font-size:.75rem; opacity:.9;}
    .wheel-wrapper{display:flex; flex-direction:column; align-items:center; gap:10px; position:relative;}
    .wheel-container{position: relative; width: 280px; height: 280px; margin:auto;}
    #wheelVisual{width:100%; height:100%; border-radius:50%; overflow:hidden; position:relative;}
    .segment{position:absolute; width:50%; height:50%; top:50%; left:50%; transform-origin:0 0; clip-path: polygon(0 0,100% 0,0 100%); display:flex; align-items:center; justify-content:flex-start; padding-left:8px; font-weight:600; font-size:0.85rem; color:#fff; text-shadow:0 1px 3px rgba(0,0,0,0.5);}
    .spin-wrapper{position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); display:flex; flex-direction:column; align-items:center; gap:8px;}
    .spin-btn{padding:14px 26px; border:none; border-radius:10px; font-weight:700; cursor:pointer; background: linear-gradient(135deg,#ffb347,#ffde59); color:#1f0f3f; box-shadow:0 10px 30px rgba(255,222,89,0.5); transition: .2s;}
    .spin-btn:active{transform:scale(.95);}
    .watch-btn{padding:12px 22px; border:none; border-radius:10px; font-weight:700; cursor:pointer; background:#22c55e; color:#fff; box-shadow:0 8px 25px rgba(34,197,94,0.6); transition:.2s; margin-top:6px;}
    .watch-btn:active{transform:scale(.97);}
    .gif-overlay{position:fixed; inset:0; background:rgba(0,0,0,0.95); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:18px; padding:16px; z-index:30; display:none; border-radius:12px; text-align:center;}
    .gif-overlay img{max-width:280px; border-radius:12px; box-shadow:0 0 40px rgba(255,255,255,0.6);}
    .close-gif{padding:10px 22px; border:none; border-radius:8px; font-weight:600; cursor:pointer; background:#fff; color:#222;}
    .badge{position:absolute; top:8px; right:8px; background:#22c55e; padding:6px 14px; border-radius:999px; font-size:.65rem; font-weight:700; animation:pop .6s ease;}
    @keyframes pop{0%{transform:scale(.8);}50%{transform:scale(1.05);}100%{transform:scale(1);}
    }
    .input{width:100%; padding:10px 14px; border:none; border-radius:8px; font-size:1rem; outline:none; }
    .form-group{display:flex; flex-direction:column; gap:6px;}
    .submit{background: linear-gradient(135deg,#36d1dc,#5b86e5); color:#fff; border:none; padding:12px 22px; border-radius:10px; cursor:pointer; font-weight:700; width:100%; transition:.2s;}
    .submit:active{transform:scale(.97);}
    .notice{background:rgba(255,255,255,0.08); padding:8px 14px; border-radius:8px; font-size:.85rem;}
    .success{background:#22c55e; padding:10px 14px; border-radius:8px; margin-top:6px; font-weight:600;}
    .id-box{background:rgba(255,255,255,0.08); padding:6px 12px; border-radius:6px; font-size:.9rem; display:inline-block; margin-right:6px;}
    @media (max-width:900px){
      .wheel-container{width:220px;height:220px;}
    }
  </style>
</head>
<body>

  <div class="container">
    <!-- HEADER -->
    <div class="header">
      <div style="display:flex; align-items:center; gap:12px;">
        <div class="title">ðŸŽ¯ FindoLucky</div>
        <div class="id-box" id="userIDDisplay">ID: -</div>
      </div>
      <div class="nav">
        <div class="wallet" id="walletDisplay">Wallet: â‚¹0</div>
        <button class="btn btn-primary" onclick="scrollToSection('wheelSection')">Spin Game</button>
        <button class="btn btn-primary" onclick="scrollToSection('withdraw')">Withdraw</button>
        <button class="btn btn-accent pulse" onclick="openTelegramWithText()">24/7 Customer Support</button>
      </div>
    </div>

    <!-- MAIN -->
    <div class="flex-gap">
      <!-- WHEEL CARD -->
      <div class="card" id="wheelSection">
        <div class="section-title">
          <div>ðŸŽ¡ Lucky Wheel</div>
          <div class="badge" id="cashoutBadge" style="display:none;">Cash Out Available!</div>
        </div>
        <div style="display:flex; gap:16px; flex-wrap:wrap;">
          <div style="flex:1; min-width:200px;">
            <div class="progress">
              <div class="progress-inner" id="cashoutBar"></div>
            </div>
            <div class="small" id="cashoutInfo">Only â‚¹500 to cash out!</div>
          </div>
          <div style="display:flex; gap:12px; align-items:center;">
            <div class="wallet">Balance: <span id="walletSmall">â‚¹0</span></div>
          </div>
        </div>
        <div class="wheel-wrapper" style="margin-top:12px;">
          <div class="wheel-container">
            <div id="wheelVisual"></div>
            <div class="spin-wrapper">
              <button class="spin-btn" id="spinBtn">Spin</button>
              <button class="watch-btn" id="watchBtn" style="display:none;">â–¶ Watch & Continue</button>
            </div>
            <div style="position:absolute; top:-6px; right:-6px;">
              <div style="width:0; height:0; border-left:16px solid transparent; border-right:16px solid transparent; border-bottom:26px solid var(--accent); transform: rotate(180deg);"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: SUPPORT + WITHDRAW -->
      <div style="flex:1; display:flex; flex-direction:column; gap:16px;">
        <!-- Customer Service -->
        <div class="card">
          <div class="section-title">ðŸ’¬ 24/7 Customer Service</div>
          <div style="display:flex; gap:14px; flex-wrap:wrap;">
            <div style="flex:1; min-width:220px;">
              <p>Apna issue type karo, ya button dabao â€” turant Telegram par redirect hoga.</p>
              <div class="form-group">
                <label>Issue likho:</label>
                <input class="input" id="supportInput" placeholder="Koi bhi likho..." />
              </div>
              <button class="submit" id="goSupport">Go to Support</button>
              <div class="small">Redirecting to: <strong>@Freefiremxdealer</strong></div>
            </div>
            <div style="flex:1; min-width:160px; display:flex; align-items:center; justify-content:center;">
              <img src="https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif" alt="support" style="max-width:140px; border-radius:10px;" />
            </div>
          </div>
        </div>

        <!-- Withdraw Section -->
        <div class="card" id="withdraw">
          <div class="section-title">
            <div>ðŸ’° Withdraw Request</div>
            <div class="small" style="margin-left:auto;">Minimum: â‚¹500</div>
          </div>
          <div style="display:flex; gap:16px; flex-wrap:wrap;">
            <div style="flex:1; min-width:260px;">
              <p>Apne account details bhar kar withdraw request bhejo. Email draft automatically khulega.</p>
              <div class="form-group">
                <label>Naam</label>
                <input class="input" id="name" placeholder="Apna naam likho" />
              </div>
              <div class="form-group">
                <label>Account Number</label>
                <input class="input" id="account" placeholder="Bank account number" />
              </div>
              <div class="form-group">
                <label>IFSC Code</label>
                <input class="input" id="ifsc" placeholder="IFSC code" />
              </div>
              <div class="form-group">
                <label>Phone Number</label>
                <input class="input" id="phone" placeholder="Mobile number" />
              </div>
              <div class="form-group">
                <label>Amount (â‚¹)</label>
                <input class="input" id="amount" placeholder="Jaise 500" type="number" min="1" />
              </div>
              <button class="submit" id="withdrawSubmit">Submit Withdrawal</button>
              <div id="withdrawMsg"></div>
              <div class="small">Email draft me sab details jayengi. Backend chahiye to bolo.</div>
            </div>
            <div style="flex:1; min-width:160px; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px;">
              <img src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif" alt="withdraw" style="max-width:160px; border-radius:12px;" />
              <div class="notice">Cashout target â‚¹500. Spin karke balance badhao.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- GIF overlay -->
    <div class="gif-overlay" id="gifOverlay">
      <div id="gifText" style="font-size:1.6rem; font-weight:700;"></div>
      <img src="" alt="result gif" id="resultGif" />
      <button class="close-gif" id="closeGif">Continue</button>
    </div>

    <div style="margin:40px 0; text-align:center; font-size:.75rem; opacity:.8;">
      &copy; 2025 FindoLucky. All rights reserved.
    </div>
  </div>

  <script>
    // random user ID
    function makeRandomID() {
      return Math.floor(1000000000 + Math.random() * 9000000000).toString();
    }
    function ensureUserID() {
      let id = localStorage.getItem("generatedID");
      if (!id) {
        id = makeRandomID();
        localStorage.setItem("generatedID", id);
      }
      document.getElementById("userIDDisplay").textContent = "ID: " + id;
    }

    // segments definition
    const segments = [
      { label: "â‚¹1", value: 1, type: "win" },
      { label: "Double", value: null, type: "double" },
      { label: "â‚¹5", value: 5, type: "win" },
      { label: "Try Again", value: 0, type: "lose" },
      { label: "â‚¹3", value: 3, type: "win" },
      { label: "Try Again", value: 0, type: "lose" },
      { label: "â‚¹10", value: 10, type: "win" },
      { label: "â‚¹2", value: 2, type: "win" }
    ];
    const gifMap = {
      win: "https://i.gifer.com/7efs.gif",
      double: "https://i.gifer.com/3o7bu8s0oY.gif",
      lose: "https://i.gifer.com/4V0K.gif"
    };

    // ad links
    const ads = [
      "https://dreadfulrulingextension.com/qegspyfiv?key=4ded15ec8272197c211924274a130a47",
      "https://dreadfulrulingextension.com/w1iw3senp?key=6183f7fe0d044a3b26e4faa96f8a4b0a",
      "https://dreadfulrulingextension.com/wv7n729zu?key=dfc9a55b32b16c9c2a12087ddd3ceaa6",
      "https://dreadfulrulingextension.com/ct8rjb02pj?key=1c3aea89b58347b73d58ac51a2e5e36b",
      "https://dreadfulrulingextension.com/q0j8kbehyt?key=61c687daba6d7428d9ce44bff654289",
      "https://dreadfulrulingextension.com/g4dg8f3k9w?key=45457f28d2902a359b61ae4bca6eb4a7",
      "https://dreadfulrulingextension.com/j9gse5sbnd?key=00eabd4cdb7359b2f12f1a9916a6e125",
      "https://dreadfulrulingextension.com/zyfjy0nj?key=7e308c86875a89538f55e40ca9ee239e",
      "https://dreadfulrulingextension.com/f8qj88z8e?key=ad766aff9a858344be5c93529b273bbf",
      "https://dreadfulrulingextension.com/rqsc4qz4?key=aed7af65e0095b19b3154059fe3eeb82",
      "https://dreadfulrulingextension.com/jaz4sv61q?key=bca10204a7df9b0b4902ad867b343a71",
      "https://dreadfulrulingextension.com/kjjs08bk1?key=2c74b6ace44150f9fc4889f928b87a1a",
      "https://dreadfulrulingextension.com/n5a53ivjsw?key=10f20e7816ba0b0c5ca764c2d1c46afe",
      "https://dreadfulrulingextension.com/xfkzs3b85?key=9df7f84ede014babbcc6e14c81a4ce6b",
      "https://dreadfulrulingextension.com/x2tph87xzz?key=040c7571a9041be416b1ea1596a0ce5a",
      "https://dreadfulrulingextension.com/tw7k52hsw0?key=415bb36ff9bd72ca6afb6bb40ec873c9",
      "https://dreadfulrulingextension.com/yade5ds4eg?key=0fe0e13abbd7770b6c0aded48d01e649",
      "https://dreadfulrulingextension.com/acdr1xu89?key=1c282832a44d6f97b59eff8da6f8e72e"
    ];

    // DOM refs
    const walletDisplay = document.getElementById("walletDisplay");
    const walletSmall = document.getElementById("walletSmall");
    const cashoutBar = document.getElementById("cashoutBar");
    const cashoutInfo = document.getElementById("cashoutInfo");
    const cashoutBadge = document.getElementById("cashoutBadge");
    const spinBtn = document.getElementById("spinBtn");
    const watchBtn = document.getElementById("watchBtn");
    const gifOverlay = document.getElementById("gifOverlay");
    const resultGif = document.getElementById("resultGif");
    const gifText = document.getElementById("gifText");
    const closeGif = document.getElementById("closeGif");
    const supportInput = document.getElementById("supportInput");
    const goSupport = document.getElementById("goSupport");
    const withdrawSubmit = document.getElementById("withdrawSubmit");
    const withdrawMsg = document.getElementById("withdrawMsg");

    // wallet helpers
    function getWallet(){ return parseFloat(localStorage.getItem("wallet")||"0"); }
    function setWallet(v){ localStorage.setItem("wallet", v.toFixed(2)); updateDisplay(); }
    function updateDisplay(){
      const bal = getWallet();
      walletDisplay.textContent = "Wallet: â‚¹" + bal.toFixed(2);
      walletSmall.textContent = "â‚¹" + bal.toFixed(2);
      const needed = Math.max(500 - bal, 0);
      const percent = Math.min((bal / 500) * 100, 100);
      cashoutBar.style.width = percent + "%";
      if (needed === 0) {
        cashoutInfo.textContent = "Ready to cash out â‚¹500!"; 
        cashoutBadge.style.display = "inline-block";
      } else {
        cashoutInfo.textContent = "Only â‚¹" + needed.toFixed(2) + " to cash out â‚¹500 !";
        cashoutBadge.style.display = "none";
      }
    }

    // ad index helpers
    function getAdIndex(){ return parseInt(localStorage.getItem("adIndex")||"0",10); }
    function advanceAdIndex(){ const cur=getAdIndex(); const next=(cur+1)%ads.length; localStorage.setItem("adIndex", next.toString()); return ads[cur]; }

    // wheel build
    function buildWheel(){
      const container = document.getElementById("wheelVisual");
      if(!container) return;
      container.innerHTML="";
      const sliceAngle = 360 / segments.length;
      const wheelEl = document.createElement("div");
      wheelEl.style.position="relative";
      wheelEl.style.width="100%";
      wheelEl.style.height="100%";
      wheelEl.style.borderRadius="50%";
      wheelEl.style.overflow="hidden";
      segments.forEach((seg,i)=>{
        const div=document.createElement("div");
        div.classList.add("segment");
        div.style.transform=`rotate(${i*sliceAngle}deg) skewY(-60deg)`;
        div.style.background=`hsl(${(i/segments.length)*360},70%,45%)`;
        div.innerHTML=`<div style="transform:skewY(60deg);">${seg.label}</div>`;
        wheelEl.appendChild(div);
      });
      container.appendChild(wheelEl);
      window._wheelEl = wheelEl;
    }

    function pickSegment(){ const idx=Math.floor(Math.random()*segments.length); return { segment: segments[idx], index: idx }; }

    let spinning = false;
    const autoOpenAdAfterSpin = true;

    spinBtn.addEventListener("click", ()=>{
      if(spinning) return;
      spinning = true;
      spinBtn.disabled = true;
      watchBtn.style.display="none";
      const { segment,index } = pickSegment();
      const fullRotations = 5;
      const sliceAngle = 360/segments.length;
      const targetDeg = 360 * fullRotations + (index * sliceAngle) + sliceAngle/2;
      const wheelEl = window._wheelEl;
      if(!wheelEl){ spinning=false; spinBtn.disabled=false; return; }
      wheelEl.style.transition="transform 4s cubic-bezier(.33,.8,.35,1)";
      wheelEl.style.transform = `rotate(${-targetDeg}deg)`;
      setTimeout(()=>{
        wheelEl.style.transition="none";
        const normalized = targetDeg % 360;
        wheelEl.style.transform = `rotate(${-normalized}deg)`;
        handleResult(segment);
        spinning=false;
        spinBtn.disabled=false;
        if(autoOpenAdAfterSpin) openNextAd();
      },4200);
    });

    function handleResult(seg){
      let curr=getWallet();
      let msg="";
      let type="win";
      if(seg.type==="win"){
        curr += seg.value;
        msg=`You won â‚¹${seg.value}!`;
        type="win";
      } else if(seg.type==="double"){
        curr = curr * 2;
        msg=`Double! Wallet now â‚¹${curr.toFixed(2)}`;
        type="double";
      } else if(seg.type==="lose"){
        msg="Try Again!";
        type="lose";
      }
      setWallet(curr);
      showGifOverlay(msg,type);
      setTimeout(()=>{ watchBtn.style.display="inline-block"; },500);
    }

    function showGifOverlay(text,type){
      gifText.textContent=text;
      resultGif.src=gifMap[type]||gifMap.win;
      gifOverlay.style.display="flex";
    }
    closeGif.addEventListener("click", ()=>{ gifOverlay.style.display="none"; });

    function openNextAd(){
      const link=advanceAdIndex();
      if(link) window.open(link,"_blank");
      watchBtn.style.display="none";
    }
    watchBtn.addEventListener("click", openNextAd);

    // support redirect with prefill
    function openTelegramWithText(){
      const issue = encodeURIComponent(document.getElementById("supportInput").value || "Mujhe help chahiye");
      window.location.href = `https://t.me/Freefiremxdealer?text=${issue}`;
    }
    goSupport.addEventListener("click",(e)=>{ e.preventDefault(); openTelegramWithText(); });
    supportInput.addEventListener("keypress",(e)=>{ if(e.key==="Enter") openTelegramWithText(); });

    // withdraw form
    withdrawSubmit.addEventListener("click",(e)=>{
      e.preventDefault();
      const name=document.getElementById("name").value.trim();
      const account=document.getElementById("account").value.trim();
      const ifsc=document.getElementById("ifsc").value.trim();
      const phone=document.getElementById("phone").value.trim();
      const amount=parseFloat(document.getElementById("amount").value);
      const userID= localStorage.getItem("generatedID") || makeRandom
